<%= link_to "Root", root_path %>
<%= link_to "Collect", post_collect_path(@post.id), method: :post%>
<%= link_to "Uncollect", post_uncollect_path(@post.id), method: :post%>
<div>
<%= image_tag @post.user.check_avatar(@post.user)%>
<%= link_to @post.user.name, user_path(@post.user.id)%>
<% if @post.user != current_user%>
  <% if current_user.friend?(@post.user)%>

  <% elsif current_user.not_yet_accepted_friends?(@post.user)%>

  <% elsif current_user.not_yet_responded_friends?(@post.user)%>
    <%= link_to "Accept", accept_friendship_path(user_id: @post.user.id, friend_id: current_user.id), method: :post%>
    <%= link_to "Ignore", ignore_friendship_path(user_id: @post.user.id, friend_id: current_user.id), method: :delete%>
  <%else%>
    <%= link_to "Add Friend", friendships_path(friend_id: @post.user_id), method: :post%>
  <%end%>
<%end%>
<%= @post.title%>
<%= @post.content%>
<%= image_tag @post.image, width: '300px' %>
  <% if current_user == @post.user || current_user.role == "Admin" %>
    <%= link_to "Edit", edit_post_path(@post)%>
    <%= link_to "Delete", post_path(@post), method: :delete%>
  <%end%>
<br/>
<% @comments.each do |comment| %>
  <%= image_tag comment.user.check_avatar(comment.user)%>
  <%= link_to comment.user.name, user_path(comment.user.id)%>
  <% if comment.user != current_user%>
    <% if current_user.friend?(comment.user)%>

    <% elsif current_user.not_yet_accepted_friends?(comment.user)%>
  
    <% elsif current_user.not_yet_responded_friends?(comment.user)%>
      <%= link_to "Accept", accept_friendship_path(user_id: comment.user.id, friend_id: current_user.id), method: :post%>
      <%= link_to "Ignore", ignore_friendship_path(user_id: comment.user.id, friend_id: current_user.id), method: :delete%>
    <%else%>
      <%= link_to "Add Friend", friendships_path(friend_id: comment.user_id), method: :post%>
    <%end%>
  <%end%>
  <%= comment.content%>
  <%= image_tag comment.image, width: '300px' %>
  <% if current_user == comment.user || current_user.role == "Admin" %>
    <%= link_to "Edit", edit_post_comment_path(post_id: @post.id, comment_id: comment.id)%>
    <%= link_to "Delete", post_comment_path(post_id: @post.id, comment_id: comment.id), method: :delete%>
  <%end%>
<%end%>


<%= form_for [@post, @comment] do |f|%>
  <%= f.text_area :content%>
  <%= f.label :image, "Photo" %>
  <%= image_tag @comment.image, width: '300px' if @comment.image? %>
  <%= f.file_field :image %>
  <%= f.submit%>
<%end%>
<%= paginate @comments %>
</div>

